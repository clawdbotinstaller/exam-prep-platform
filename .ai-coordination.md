# AI Coordination File

**Last Updated**: 2026-02-07T23:45:00Z
**Project**: Arkived (Exam Prep Platform)

## Current Status

### Claude (Current) - Landing Page Review & Fixes
- **Session ID**: 5fd29aa7-d965-46e4-b853-5e154d0e685f (long-running session)
- **Task**: Frontend-design landing page review + implementing high-priority fixes
- **Status**: in_progress
- **Subagents Completed**:
  - aa16130: Visual design review ✅ COMPLETE
  - ad2721a: UX flow review ✅ COMPLETE
  - a75589c: Code quality review ✅ COMPLETE (Score: 6.1/10)
- **Comprehensive Plan Created**: `docs/plans/landing-page-comprehensive-fixes.md`
- **Immediate Fixes Already Made**:
  - Fixed StudyFlow.tsx grid alignment (removed lg:col-span-2, equal cards)
  - Fixed HeroSection.tsx hardcoded background color → bg-paper-cream
  - Fixed HeroSection.tsx alignment items-start → items-center
  - Added Navigation.tsx ARIA labels for accessibility
- **Completed** (from code quality review):
  - ✅ Create FilterButton reusable component (frontend/src/components/FilterButton.tsx)
  - ✅ Create SectionWrapper component for graph paper background (frontend/src/components/SectionWrapper.tsx)
  - ✅ Create useApi hook for loading/error state management (frontend/src/hooks/useApi.ts)
  - ✅ Create mathFormatter utility (frontend/src/utils/mathFormatter.ts)
  - ✅ Fix hardcoded colors in all section files (5 files)
  - ✅ Fix LaTeX rendering in LatexRenderer.tsx (proper delimiter handling)
- **Build Status**: ✅ Frontend builds successfully
- **Phase 1 Critical Fixes COMPLETED**:
  - ✅ Fixed multiple H1 tags in HeroSection (now single H1 with spans)
  - ✅ Fixed primary CTA visual hierarchy ("Sign Up Free" is now prominent button)
  - ✅ Added privacy policy link to ContactSection footer and form
  - ✅ Fixed contact form labels with htmlFor attributes linking to inputs
  - ✅ Added min-touch-target class (44px minimum) for all interactive elements
  - ✅ Added touch target CSS to index.css
- **Deployed**: ✅ https://arkived.clawdbotinstaller.workers.dev

### Claude #2 (PID: 71820) - Completed - Frontend-Backend Integration Fix
- **Session ID**: 5fd29aa7-d965-46e4-b853-5e154d0e685f (long-running session)
- **Task**: Fixed all frontend-backend integration issues
- **Completed**:
  - Fixed API endpoints returning correct field names (has_unlimited vs plan)
  - Fixed database schema mismatches
  - Created missing sessions and credit_transactions tables
  - Fixed PBKDF2 password hashing for test users
  - Set JWT_SECRET for production
  - Updated frontend title from "Calc2Archive" to "Arkived"
  - Deployed latest build to production
- **Status**: completed

## 2026-02-08 - Frontend Fixes Complete

### Completed

**Frontend Design & Code Review Fixes:**
1. KaTeX Rendering Fixes - Fixed regex pattern to handle nested dollar signs, added error boundary with fallback UI
2. Design System Consistency - Added stamp-red to Tailwind config, converted all hardcoded hex colors to CSS variables
3. Accessibility Improvements - Added reduced motion support, focus-visible states, ARIA labels, proper error state UI
4. Responsive Fixes - Fixed tiny font sizes, added flex-wrap to stats row, increased touch targets
5. CSS Variable Fixes - Fixed inline styles using CSS variables without var() wrapper

**Files Modified:**
- frontend/src/components/LatexRenderer.tsx
- frontend/src/pages/course/CourseAnalysis.tsx
- frontend/src/pages/course/CourseAnalysisChapter.tsx
- frontend/src/pages/course/CourseMidterm.tsx
- frontend/src/pages/course/CoursePractice.tsx
- frontend/tailwind.config.js

**Deployed:** https://arkived.clawdbotinstaller.workers.dev

### Next Steps

**Pending from Plan:**
1. Content Corrections (from frontend-fixes-plan.md)
   - Change "Calc2Archive" to "Testament" in Navigation and ContactSection
   - Remove "Submit an exam" button from ContactSection
   - Update "Request Access" to "Get Unlimited Access" with $12 price

2. Stitch Design Elements
   - Add red "Actual Exam" stamp on HeroSection hero image
   - Replace contact form with Library Checkout Card style
   - Add technical footer with Drawing No.
   - Reduce highlighter opacity from 0.5 to 0.4
- **Verified**: All API endpoints working (health, auth, courses, topics, questions, midterm presets, credits)

### Claude #1 (PID: 25480) - Completed - Course Analysis Implementation
- **Session ID**: current session
- **Task**: Course Analysis Chapter Grid redesign implementation
- **Completed**:
  - Database cleanup: Removed 5 questions not in approved sections (series questions, second-order DE)
  - Updated seed file: 28 clean questions organized in approved sections
  - CSS Design Tokens: Added chapter-card, technical-stamp, section-tabs, exam-type-filter styles
  - Components built: ChapterCard, TechnicalStamp, SectionTabs, ExamTypeFilter
  - API updated: /api/courses/:id/analysis-detailed returns chapter/section/technique hierarchy
  - CourseAnalysis page: Refactored to chapter grid with filtering
  - CourseAnalysisChapter page: New detail page with section tabs
  - Routing: Added /analysis/chapter/:chapterId route
- **Status**: completed
- **Build Status**: ✅ Frontend builds successfully
- **Next**: Deploy updated worker and test end-to-end

### Claude (Current) - Frontend-Design Course Analysis Complete
- **Session ID**: 5fd29aa7-d965-46e4-b853-5e154d0e685f
- **Task**: Applied /frontend-design skill to Course Analysis pages + verification fixes
- **Status**: completed
- **Completed**:
  - Applied "Engineer's Study Desk" aesthetic to CourseAnalysis.tsx using /frontend-design skill
    - Scattered desk layout with rotated cards and vertical offsets
    - Dramatic scale contrast (massive chapter numbers)
    - Physical depth with shifting shadow layers on hover
    - Technical drawing elements (corner marks, drawing numbers, stamps)
    - Graph paper background with SVG noise texture
  - Redesigned CourseAnalysisChapter.tsx with technical drawing aesthetic
    - Massive chapter number overlapping with title
    - Section list with active state indicators
    - Detail panel with technical corner brackets
    - Stats grid with icon headers
  - Fixed hardcoded "MTH240" references to use dynamic `{slug}` parameter
  - Code review subagent verified no hallucinated features
  - Build verified: ✅ No TypeScript errors
- **Files Modified**:
  - `frontend/src/pages/course/CourseAnalysis.tsx` - Complete redesign with frontend-design
  - `frontend/src/pages/course/CourseAnalysisChapter.tsx` - Complete redesign + slug fixes
- **Blocked By**: None

### Claude (Current) - Backend Analysis Real Data Update
- **Session ID**: 5fd29aa7-d965-46e4-b853-5e154d0e685f
- **Task**: Updated analysis endpoints to use real DB-derived data
- **Status**: completed
- **Completed**:
  - Updated `/api/courses/:id/analysis` to use real DB queries:
    - Topic distribution from actual questions table
    - Difficulty distribution calculated from question difficulties
    - High-value topics based on points + frequency
    - Study order ranked by difficulty × count
    - Dynamic study strategy generation
  - Updated `/api/courses/:id/analysis-detailed`:
    - Limited to MIDTERM TOPICS ONLY (expandable later)
    - Based on OpenStax Calculus Vol 2: Ch 3 (3.1-3.4, 3.7) + Ch 4 (4.1, 4.2, 4.5)
    - Excludes: 3.5, 3.6, 4.3, 4.4, and Ch 5-7
    - Uses actual question data with techniques JSON parsing
  - Updated `/api/midterm/generate` to support section-based filtering:
    - Accepts `config.sections` array to filter questions by specific sections
    - Allows custom midterm generation by section (e.g., ["4.1", "4.2", "4.5"])
  - Deployed updated worker to production
- **Files Modified**:
  - `worker/src/index.ts` - Real DB queries for analysis endpoints
- **Blocked By**: None

## Recent Changes (Last 10)

1. **[CLAUDE]** Updated analysis endpoints to use real DB-derived data - topic distribution, difficulty stats, high-value topics from actual questions
2. **[CLAUDE]** Limited analysis-detailed to midterm topics only - Ch 3 (3.1-3.4, 3.7) + Ch 4 (4.2, 4.5), expandable later
3. **[CLAUDE]** Applied /frontend-design skill to Course Analysis pages - "Engineer's Study Desk" aesthetic with scattered cards, shadow layers, technical drawing elements
4. **[CLAUDE]** Fixed hardcoded MTH240 references - changed to dynamic slug parameter in breadcrumbs and drawing numbers
5. **[CLAUDE]** Code review subagent verified Course Analysis implementation - no hallucinated features, all functionality backed by API
6. **[CODEX]** Completed Course Analysis Chapter Grid implementation - ChapterCard, SectionTabs, TechnicalStamp, ExamTypeFilter components; refactored CourseAnalysis and created CourseAnalysisChapter page
7. **[CLAUDE]** Fixed all frontend-backend integration issues - API endpoints, auth, database schema, deployed to production
2. **[CLAUDE]** Fixed landing page design issues (StudyFlow bento grid, Contact section contrast, ArchiveBrowse LaTeX)
3. **[CLAUDE]** Fixed API endpoint integration issues (TopicAnalysisDetail, contact form, totalExams)
4. **[CLAUDE]** Created Course Analysis redesign design document and implementation plan
5. **[CLAUDE]** Identified question count discrepancy (7 IBP questions exist but section shows 2)
6. **[CLAUDE]** Added public API endpoints for landing page (/api/topics, /api/questions/public)
7. **[CLAUDE]** Fixed Hono route ordering for /api/courses/:id/topics/public
8. **[CLAUDE]** Fixed TypeScript errors in CourseLayout.tsx
9. **[CLAUDE]** Fixed API integration - made /api/courses public
10. **[CLAUDE]** Added /api/midterm/presets endpoint

## Code Review Notes (Backend - Git)

### Critical Mismatches / Risks
- **Schema mismatch**: `/init` does not create `has_unlimited`, `unlimited_until`, `plan`, `monthly_credits` but code uses these fields.
- **Admin endpoints unprotected**: `/api/admin/seed-mth240` and `/api/admin/create-test-users` are public.
- **Test users password hash mismatch**: `create-test-users` inserts bcrypt hashes but auth uses PBKDF2 (`salt:hash`), so logins will fail if those rows are used.

### Data Seeding Mismatches
- `seed-mth240` endpoint inserts only **5 sample questions**, not the full 33.
- `seed-full.sql` is explicitly truncated and not complete.
- `docs/data questions.md` contains full 33-question dataset but **schema differs** from worker tables.
- `import-questions.sql` creates topics + inserts questions (closest to worker schema), but isn’t referenced by `/api/admin/seed-mth240`.

### Feature Quality Gaps (Calc2)
- `/api/courses/:id/analysis` returns placeholder analysis, not DB-derived.
- `/api/courses/:id/analysis-detailed` only maps sections 3.1–3.4, 3.7, 4.1, 4.2, 4.5; **series topics are excluded**, so analysis under-reports coverage.
- `/api/midterm/generate` uses one random draw to set difficulty range; does **not** actually produce the requested distribution.

## Tasks to Implement (From Review)
- Add missing user columns in `/init` and migration-safe `ALTER TABLE` for `has_unlimited`, `unlimited_until`, `plan`, `monthly_credits`.
- Lock down admin endpoints (auth gate or remove from production route).
- Replace bcrypt test hashes with PBKDF2 or reuse `hashPassword`.
- Replace `/api/admin/seed-mth240` with a full seeding path (use `seed-full.sql` or a normalized JSON ingest).
- Update analysis endpoints to compute real aggregates from DB; extend section mapping to series topics.
- Fix midterm generation to honor difficulty distribution across the full question set.

## Proposed Next Step (Codex)
- Align DB schema + seeding so prod matches expected 33-question dataset, then verify midterm generation uses stratified difficulty selection.

## Must-Fix Plan: Backend Credit/Auth/Data Gaps (Blocking Beta)

**Note:** The items below are required before beta; treat as blockers.

1. **Schema alignment (credits + plans)**
   - Update `/init` to create `has_unlimited`, `unlimited_until`, `plan`, `monthly_credits` on `users`.
   - Add migration-safe `ALTER TABLE` guards for the same columns.
   - Verify `ensureMonthlyCredits` respects `monthly_credits` if present (default 5).

2. **Lock down admin endpoints**
   - Require admin auth header or remove `/api/admin/*` from production build.
   - Add explicit environment guard (e.g., only enable in `ENVIRONMENT=development`).

3. **Fix test user hashing**
   - Replace bcrypt hashes in `/api/admin/create-test-users` with PBKDF2 via `hashPassword()`.
   - Backfill existing test users or remove/replace them in production DB.

4. **Fix midterm difficulty distribution**
   - Implement stratified selection: compute target counts per bucket (easy/medium/hard) from distribution.
   - Sample per bucket with fallback if insufficient inventory.
   - Ensure no duplicates and total count matches config.

5. **Seed consistency**
   - Make `/api/admin/seed-mth240` use a full dataset (either import `seed-full.sql` or create a normalized JSON seed).
   - Mark `seed-full.sql` complete or delete it to avoid confusion.
   - Keep a single source of truth for questions (prefer JSON or SQL, not both).

6. **Verification checklist**
   - D1: `SELECT COUNT(*) FROM questions WHERE course_id='calc2'` returns 33 (or expected total).
   - Auth: test user login works with PBKDF2.
   - Credits: run analysis + practice + midterm and confirm deductions & `credit_transactions` logs.

## Next Priority Tasks

### MVP Launch Focus (Current)
- [ ] Deploy updated frontend to production (Course Analysis redesign ready)
- [ ] Stripe integration for payments
- [ ] Test midterm generation flow end-to-end
- [ ] Add proper error boundaries
- [x] Deploy worker to production with new contact endpoint

### Course Analysis Redesign ✅ COMPLETE
- **Design Document**: `docs/designs/course-analysis-redesign.md`
- **Implementation**: `frontend/src/pages/course/CourseAnalysis.tsx`, `CourseAnalysisChapter.tsx`
- **Status**: ✅ Complete - "Engineer's Study Desk" aesthetic applied with /frontend-design skill
- **Features**: Scattered chapter cards, technical drawing elements, section tabs, frequency stamps

### Proposed Next Steps (Pick one)
1. **Deploy Frontend** - Build and deploy the redesigned Course Analysis to production
2. **Stripe Payments** - Integrate Stripe checkout for $12 unlimited access
3. **Add More Courses** - Extend beyond MTH240 with dynamic course support
4. **End-to-End Testing** - Full user journey testing (signup → practice → midterm)
5. ~~**Backend Analysis API**~~ ✅ Complete - Now uses real DB-derived data with midterm-only topics

### AI Exam Ingestion Pipeline (Future/Icebox)
- **Plan**: `docs/plans/ai-exam-ingestion-pipeline.md`
- **Status**: Tabled - manual seeding sufficient for MVP launch
- **Revisit when**: Need to ingest 5+ new exams quickly

## API Status

| Endpoint | Status | Notes |
|----------|--------|-------|
| /api/health | ✅ Working | |
| /api/auth/login | ✅ Working | test@example.com / test123 |
| /api/auth/me | ✅ Working | |
| /api/credits/balance | ✅ Working | |
| /api/courses | ✅ Working | |
| /api/courses/:id/topics | ✅ Working | 15 topics seeded |
| /api/courses/:id/questions | ✅ Working | Returns LaTeX content |
| /api/midterm/generate | ✅ Working | Defaults to calc2 |
| /api/contact | ✅ Working | Stores contact form submissions |
| /api/midterm/presets | ✅ Working | Returns 4 preset configurations |
| /api/topics | ✅ Working | Public - all topics for calc2 |
| /api/questions/public | ✅ Working | Public - questions without auth |
| /api/courses/:id/topics/public | ✅ Working | Public - topics without auth |
| /api/topics/:topicId/public | ✅ Working | Public - topic detail with questions |
| /api/courses/:id/analysis | ✅ Working | Real DB-derived topic/difficulty distribution |
| /api/courses/:id/analysis-detailed | ✅ Working | Midterm topics only (Ch 3 + 4.2, 4.5) |

## Database Schema

### users
- id, email, password_hash, credits, has_unlimited, unlimited_until, credits_reset_at

### topics (15 seeded)
- integration_by_parts, trig_integrals, trig_substitution, partial_fractions, improper_integrals
- arc_length, surface_area, center_of_mass
- series_basics, integral_test, comparison_tests, alternating_series, ratio_root_tests, power_series, taylor_series

### questions
- 33 questions from 5 MTH240 exams
- question_text contains LaTeX like `$\int \tan^{5}(x) \sec^{6}(x) dx$`

### contact_submissions
- id, name, email, subject, message, page_url, user_agent, status, created_at
- Stores contact form submissions with error reports

## Environment

- **Worker URL**: https://arkived.clawdbotinstaller.workers.dev
- **Database**: testament-db (D1)
- **Test Users**:
  - test@example.com / test123 (1 credit)
  - unlimited@example.com / test123 (unlimited)

## Handoff Notes

### For Next AI Instance

1. **LaTeX Rendering**: Just installed react-katex. Questions now render properly with `<LatexRenderer tex={...} />`

2. **If questions fail to load**: Check:
   - API endpoint: /api/courses/calc2/questions?limit=N
   - Auth token required
   - Questions exist in DB (33 seeded)

3. **Error Handling Pattern**: Use ErrorApology component for consistent error UX:
   ```tsx
   import ErrorApology from '../components/ErrorApology';

   // In render:
   {error && (
     <ErrorApology
       title="We're sorry, something went wrong"
       message="We couldn't load this content. This might be a temporary issue."
       errorDetails={error}
       onRetry={() => window.location.reload()}
     />
   )}
   ```

4. **Known Issues**:
   - Frontend build can fail on unused variables (TypeScript strict)
   - ~Some sections still use hardcoded data~ ✅ Fixed
   - ~Contact form not wired to backend yet~ ✅ Fixed

5. **Next Priority Tasks**:
   - [x] Fix ContactSection form submission (endpoint exists at /api/contact)
   - [ ] Deploy worker to production with new contact endpoint
   - [ ] Add proper error boundaries
   - [ ] Test midterm generation flow end-to-end
   - [ ] Stripe integration for payments

## Communication Protocol

1. **Before Starting**: Read this file, check git status
2. **After Changes**: Update this file with your changes
3. **Git Commits**: Use prefix `[CLAUDE]` or `[CODEX]` in commit messages
4. **Conflicts**: If both working, use different branches

## Commands

```bash
# Check API health
curl https://arkived.clawdbotinstaller.workers.dev/api/health

# Build frontend
cd frontend && npm run build

# Deploy worker
cd worker && wrangler deploy

# Check DB tables
wrangler d1 execute testament-db --remote --command="SELECT name FROM sqlite_master WHERE type='table'"
```

---

# AI Instance Behavior Protocol

**READ THIS SECTION BEFORE MAKING ANY CHANGES**

## 1. Mandatory Pre-Work Checklist

Before starting ANY task, you MUST:

- [ ] Read this entire `.ai-coordination.md` file
- [ ] Check "Current Status" to see if another AI is working
- [ ] Run `git status` to see uncommitted changes
- [ ] Check the last 5 commits: `git log --oneline -5`
- [ ] Verify frontend builds: `cd frontend && npm run build`

## 2. Status Update Protocol

**When starting work:**
1. Update "Current Status" section with your name (Claude/Codex) and task
2. Set status to "in_progress"
3. Note any files you plan to modify
4. Update the timestamp

**When completing work:**
1. Update status to "completed"
2. Add your changes to "Recent Changes" list
3. Update any relevant API/Database documentation
4. Update the timestamp

**When blocked:**
1. Set status to "blocked"
2. Note what you're blocked by
3. Leave detailed notes for the next AI

## 3. Git Commit Rules

**Commit Message Format:**
```
[AI-NAME] type: brief description

- Detail 1
- Detail 2
```

**Examples:**
```
[CLAUDE] fix: resolve LaTeX rendering in ArchiveBrowse

- Installed react-katex
- Created LatexRenderer component
- Updated ArchiveBrowse to use component
```

```
[CODEX] feat: add Stripe payment integration

- Added Stripe checkout page
- Created payment webhook handler
- Updated credits balance after payment
```

**NEVER commit:**
- Without reading `.ai-coordination.md` first
- Without checking if another AI is working on the same files
- Breaking changes without documenting them

## 4. File Modification Rules

**Before editing a file:**
1. Check if it's listed in another AI's "Files Modified"
2. If yes, communicate or choose different files
3. If must edit, document the conflict in this file

**After editing a file:**
1. Add it to your "Files Modified" list
2. Note what you changed and why
3. Update the "Last Updated" timestamp

## 5. Conflict Resolution

**If you find uncommitted changes by another AI:**

1. **DON'T** discard them automatically
2. Read the code to understand what they were doing
3. Try to preserve their work if possible
4. If you must override, document why in this file
5. If merging is complex, ask the user for help

**If you and another AI are working simultaneously:**

1. Coordinate through this file
2. Work on different files when possible
3. If same file needed:
   - One AI creates a branch: `git checkout -b feature/xyz`
   - Other AI works on main or different branch
   - Merge when both done

## 6. Build & Deploy Rules

**NEVER deploy if:**
- Frontend build fails (`npm run build`)
- TypeScript has errors
- Tests fail (if any exist)
- You haven't tested your changes locally

**Always test these after changes:**
- Login: `test@example.com` / `test123`
- API Health: `/api/health`
- Questions load: `/api/courses/calc2/questions`
- LaTeX renders properly

## 7. Error Handling Standards

**When adding error handling:**

1. Use the `ErrorApology` component for UI errors:
   ```tsx
   import ErrorApology from '../components/ErrorApology';

   {error && (
     <ErrorApology
       title="We're sorry, something went wrong"
       message="We couldn't load this content."
       errorDetails={error}
       onRetry={fetchData}
     />
   )}
   ```

2. Always log errors to console with context:
   ```typescript
   console.error('Failed to load questions:', err);
   ```

3. Show user-friendly messages, not raw errors

## 8. Code Style Requirements

**TypeScript:**
- NO unused variables (build will fail)
- NO implicit any types
- Proper error types: `Error | unknown`

**Imports:**
- Remove unused imports before committing
- Group: React → Libraries → Local components → Utils

**Components:**
- Use functional components with hooks
- Proper TypeScript interfaces for props
- Loading states for async data
- Error states with ErrorApology

## 9. Communication Template

**When handing off work, use this format:**

```markdown
### [AI-NAME] - [STATUS]

**Task**: What you were working on
**Status**: in_progress / completed / blocked
**Files Modified**:
- file/path.tsx - what you changed
- file/path.ts - what you changed

**Notes for Next AI**:
- Important context they need
- Known issues
- Suggested next steps

**Build Status**: ✅ / ❌
```

## 10. Emergency Procedures

**If you break the build:**
1. Stop immediately
2. Document what you were trying to do
3. Revert if you can't fix quickly
4. Update this file with what went wrong

**If you notice the site is down:**
1. Check `/api/health` endpoint
2. Check wrangler logs if needed
3. Document issue in this file
4. Notify user if critical

**If database changes fail:**
1. Never run destructive migrations without backup plan
2. Test on local first
3. Document schema changes here
4. Coordinate with other AIs

## 11. Quick Reference

**Project Structure:**
```
exam-prep-platform/
├── frontend/          # React + Vite app
│   ├── src/
│   │   ├── components/
│   │   ├── pages/
│   │   └── sections/
│   └── package.json
├── worker/            # Cloudflare Worker
│   ├── src/index.ts   # Main API code
│   └── public/        # Static assets
└── .ai-coordination.md   # THIS FILE
```

**Important Files:**
- `worker/src/index.ts` - All API endpoints
- `frontend/src/lib/api.ts` - API client
- `frontend/src/components/ErrorApology.tsx` - Error component
- `frontend/src/components/LatexRenderer.tsx` - Math rendering

**Test Credentials:**
- Regular: `test@example.com` / `test123` (1 credit)
- Unlimited: `unlimited@example.com` / `test123`

**Live URL:** https://arkived.clawdbotinstaller.workers.dev

---

## AI Instance Sign-Off

**Current AI**: Claude (Opus 4.5) - PID: 5fd29aa7-d965-46e4-b853-5e154d0e685f
**Started**: 2026-02-07T20:45:00Z
**Task**: Applied /frontend-design skill to Course Analysis pages - "Engineer's Study Desk" aesthetic, fixed hardcoded MTH240 references, verified with subagent
**Status**: completed
**Next**: Deploy frontend to production OR Stripe integration

I have read and agree to follow the AI Instance Behavior Protocol.
